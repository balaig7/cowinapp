function getStateValue(t) { var a = t.value, e = ""; $.ajax({ url: "https://cdn-api.co-vin.in/api/v2/admin/location/districts/" + a, method: "get", contentType: "application/json; charset=utf-8", success: function (t) { e += "<h5>SELECT DISTRICT</h5>", e += '<div class="form-group">', e += '<select class="form-select all-districts" onchange="getDistrictValue(this);">', e += "<option>Choose District</option>", $.each(t.districts, (function (t, a) { e += '<option value="' + a.district_id + '">' + a.district_name + "</option>" })), e += "</select>", e += "</div>", $(".districts").html(e), $(".all-districts").select2() } }) } function getDistrictValue(t) { t.value; $(".date-picker").remove(); $(".date").append('<div class="date-picker"><h5>SELECT DATE</h5><input type="date" class="selected-date form-control" name="date" onchange="getSelectedDate(this);"></div>') } function getSelectedDate(t) { showHospitals($(".all-districts").val(), t = t.value.split("-").reverse().join("-")) } function showHospitals(t, a) { var e = ""; $.ajax({ url: "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=" + t + "&date=" + a, method: "get", contentType: "application/json; charset=utf-8", success: function (t) { $("html,body").animate({ scrollTop: $(".hospitals").offset().top }, "1000"), $(this).fadeIn("slow"); var i = [...new Map(t.sessions.map((t => [t.block_name, t]))).values()]; i.length > 2 && (e += '<div class="d-flex blocks justify-content-md-center mb-4">', e += "<div>", e += '<button type="button" class="btn mx-1 btn-outline-primary categories rounded-pill" data-filter="all">All</button></div>', $.each(i, (function (t, a) { e += "<div>", e += '<button class="btn mx-1 btn-outline-primary categories rounded-pill" data-filter="' + a.block_name.replace(/ /g, "-") + '">' + a.block_name + "</div>" })), e += "</div>"), e += '<marquee><h5 class="mb-4 text-primary">Hospitals available on (' + a + ")</h5></marquee>", e += '<div class="row">', t.sessions.length > 0 ? $.each(t.sessions, (function (t, a) { e += '<div class="col-lg-3 details col-sm-12 p-3 ' + a.block_name.replace(/ /g, "-") + ' ">', e += '<div class="card border-0 ">', e += '<div class="card-header bg-primary text-white text-wrap" data-bs-target="#collapse-' + a.center_id + '">', e += '<i class="fa fa-plus-square fa-2x"></i><span class="h-name mx-2">' + a.name + '</span><i class="fa fa-chevron-down mt-2" ></i></div>', e += '<div class="card-body" id="collapse-' + a.center_id + '">', e += '<p><i class="fas fa-map-marker mx-1"></i>' + a.address + "</p>", e += '<p><i class="fas fa-rupee-sign mx-1"></i>' + a.fee + "</p>", e += '<p><i class="fas fa-syringe mx-1"></i>' + a.vaccine + " (<b>" + a.available_capacity + "</b>) </p>", e += '<div class="mx-4 mb-1">Dose 1 - <b>' + a.available_capacity_dose1 + "</b></div>", e += '<div class="mx-4 mb-3">Dose 2 - <b>' + a.available_capacity_dose2 + "</b></div>", null == a.max_age_limit ? a.max_age_limit = " & above" : a.max_age_limit = " - " + a.max_age_limit, e += "<p>Age Limit - <span ><b>" + a.min_age_limit + a.max_age_limit + "</b></span></p>", e += '<p><i class="far fa-clock mx-1"></i>Timings</p>', $.each(a.slots, (function (t, a) { e += '<p class="rounded border slots border-primary text-center">' + a.time + "</p>" })), e += "</div>", e += "</div>", e += "</div>" })) : e += '<h4 class="text-center alert-blinking " style="margin-top:10%">Sorry no vaccination providers available in this date</h4>', e += "</div>", $(".hospitals").html(e) } }) } $(document).ready((function () { $.ajax({ url: "https://cdn-api.co-vin.in/api/v2/admin/location/states", method: "get", contentType: "application/json; charset=utf-8", success: function (t) { var a = ""; a += "<h5>SELECT STATE</h5>", a += '<div class="form-group">', a += '<select class="form-select states" aria-label="Default select example" onchange="getStateValue(this);">', a += "<option>Choose State</option>", $.each(t.states, (function (t, e) { a += '<option value="' + e.state_id + '">' + e.state_name + "</option>" })), a += "</select>", a += "</div>", $(".all-states").html(a), $(".states").select2() } }) })), $(document).on("click", ".card", (function () { $(this).find(".card-body").toggle(), $(".card-body").click((function () { return !1 })) })), $(document).on("click", ".categories", (function () { $(".categories").removeClass("active"), $(this).addClass("active"); var t = $(this).data("filter"); $(".details").each((function () { "all" == t ? ($(this).fadeIn("slow"), $(this).show()) : ($(this).fadeIn("slow"), $(this).hide().filter("." + t).show()) })) }));